import{a as H}from"./chunk-6PF76DYQ.js";import{b as R,d as W,e as z,f as P,g as Y,h as G,m as q}from"./chunk-YHPL2QDS.js";import{a as J,b as K}from"./chunk-E24AH63J.js";import{A as h,B as r,Ba as O,D as x,E as C,I as v,L as m,N as n,O as i,P as y,Q as _,R as u,S as s,U as o,V as c,W as b,X as w,Y as S,Z as I,_ as D,ba as T,ea as j,fa as E,ga as k,na as U,oa as V,pa as L,qa as F,ra as N,s as p,t as g,va as M,xa as A,ya as B}from"./chunk-K65JTHMW.js";var X=t=>["/events",t,"edit"],Z=(t,l,e,d)=>({"text-joy-600 dark:text-joy-400":t,"text-sadness-600 dark:text-sadness-400":l,"text-anger-600 dark:text-anger-400":e,"text-fear-600 dark:text-fear-400":d});function $(t,l){if(t&1&&(n(0,"a",10),o(1," Edit Event "),i()),t&2){let e=s();m("routerLink",T(1,X,e.event==null?null:e.event.id))}}function ee(t,l){if(t&1){let e=_();n(0,"button",11),u("click",function(){p(e);let a=s();return g(a.deleteEvent())}),o(1," Delete "),i()}}function te(t,l){t&1&&(n(0,"div",12),y(1,"div",13),i())}function ne(t,l){if(t&1&&(n(0,"div",37),y(1,"img",38),i()),t&2){let e=l.$implicit;r(),m("src",e,h)}}function ie(t,l){if(t&1&&(n(0,"div",33)(1,"h3",34),o(2,"Attachments"),i(),n(3,"div",35),v(4,ne,2,1,"div",36),i()()),t&2){let e=s(2);r(4),m("ngForOf",e.event.attachments)}}function re(t,l){if(t&1&&y(0,"img",48),t&2){let e=s(3);m("src",e.currentUser.profileImage,h)}}function oe(t,l){if(t&1&&(n(0,"span"),o(1),i()),t&2){let e=s(3);r(),c(e.currentUser.name.charAt(0))}}function ae(t,l){if(t&1){let e=_();n(0,"div",39)(1,"div",4)(2,"div",40),v(3,re,1,1,"img",41)(4,oe,2,1,"span",42),i(),n(5,"div",43)(6,"form",44),u("ngSubmit",function(){p(e);let a=s(2);return g(a.addComment())}),n(7,"textarea",45),D("ngModelChange",function(a){p(e);let f=s(2);return I(f.newComment,a)||(f.newComment=a),g(a)}),i(),n(8,"div",46)(9,"button",47),o(10," Comment "),i()()()()()()}if(t&2){let e=s(2);r(3),m("ngIf",e.currentUser.profileImage),r(),m("ngIf",!e.currentUser.profileImage),r(3),S("ngModel",e.newComment),r(2),m("disabled",!e.newComment.trim())}}function me(t,l){if(t&1&&(n(0,"div",4)(1,"div",40)(2,"span"),o(3),i()(),n(4,"div",49)(5,"div",50)(6,"h3",51),o(7),i(),n(8,"p",52),o(9),E(10,"date"),i()(),n(11,"p",53),o(12),i()()()),t&2){let e=l.$implicit;r(3),c(e.username.charAt(0)),r(4),c(e.username),r(2),c(k(10,4,e.createdAt,"medium")),r(3),c(e.content)}}function de(t,l){t&1&&(n(0,"div",54)(1,"p",55),o(2,"No comments yet. Be the first to comment!"),i()())}function le(t,l){if(t&1){let e=_();n(0,"div",14)(1,"div",15)(2,"div",16)(3,"div")(4,"h1",17),o(5),i(),n(6,"div",18)(7,"span"),o(8),E(9,"date"),i(),n(10,"span",19),o(11,"\u2022"),i(),n(12,"span",14),o(13),i()()()(),n(14,"div",20)(15,"p",21),o(16),i()(),v(17,ie,5,1,"div",22),i(),n(18,"div",15)(19,"div",23)(20,"div",24)(21,"button",25),u("click",function(){p(e);let a=s();return g(a.likeEvent())}),n(22,"span"),o(23,"\u2764\uFE0F"),i(),n(24,"span"),o(25),i()(),n(26,"button",25),u("click",function(){p(e);let a=s();return g(a.scrollToComments())}),n(27,"span"),o(28,"\u{1F4AC}"),i(),n(29,"span"),o(30),i()()(),n(31,"button",26)(32,"span"),o(33,"\u{1F517} Share"),i()()()(),n(34,"div",27)(35,"h2",28),o(36,"Comments"),i(),v(37,ae,11,4,"div",29),n(38,"div",30),v(39,me,13,7,"div",31)(40,de,3,0,"div",32),i()()()}if(t&2){let e=s();m("ngClass",e.event.theme),r(5),c(e.event.title),r(3),c(k(9,13,e.event.createdAt,"medium")),r(4),m("ngClass",j(16,Z,e.event.emotion==="joy",e.event.emotion==="sadness",e.event.emotion==="anger",e.event.emotion==="fear")),r(),w(" ",e.getEmotionIcon(e.event.emotion)," ",e.getEmotionDisplayName(e.event.emotion)," "),r(3),c(e.event.content),r(),m("ngIf",e.event.attachments&&e.event.attachments.length>0),r(8),b("",e.event.likes," Likes"),r(5),b("",e.event.comments.length," Comments"),r(7),m("ngIf",e.currentUser),r(2),m("ngForOf",e.event.comments),r(),m("ngIf",e.event.comments.length===0)}}function se(t,l){t&1&&(n(0,"div",56)(1,"div",57),o(2,"\u{1F615}"),i(),n(3,"h3",58),o(4,"Event not found"),i(),n(5,"p",59),o(6," The event you're looking for doesn't exist or has been removed. "),i(),n(7,"a",60),o(8," Back to Events "),i()())}var be=(()=>{class t{constructor(e,d,a,f,Q){this.route=e,this.router=d,this.eventService=a,this.authService=f,this.emotionService=Q,this.isLoading=!0,this.currentUser=null,this.newComment=""}ngOnInit(){this.currentUser=this.authService.getCurrentUser();let e=this.route.snapshot.paramMap.get("id");e&&this.loadEvent(e)}loadEvent(e){this.eventService.getEventById(e).subscribe({next:d=>{this.event=d,this.isLoading=!1},error:d=>{console.error("Error loading event:",d),this.isLoading=!1}})}likeEvent(){this.event&&this.eventService.toggleLike(this.event.id).subscribe({next:e=>{this.event=e},error:e=>{console.error("Error liking event:",e)}})}addComment(){!this.event||!this.currentUser||!this.newComment.trim()||this.eventService.addComment(this.event.id,this.currentUser.id,this.currentUser.name,this.newComment.trim()).subscribe({next:e=>{this.event=e,this.newComment=""},error:e=>{console.error("Error adding comment:",e)}})}deleteEvent(){this.event&&confirm("Are you sure you want to delete this event? This action cannot be undone.")&&this.eventService.deleteEvent(this.event.id).subscribe({next:e=>{e&&this.router.navigate(["/events"])},error:e=>{console.error("Error deleting event:",e)}})}scrollToComments(){document.getElementById("comments")?.scrollIntoView({behavior:"smooth"})}getEmotionDisplayName(e){return this.emotionService.getEmotionDisplayName(e)}getEmotionIcon(e){return this.emotionService.getEmotionIcon(e)}static{this.\u0275fac=function(d){return new(d||t)(x(M),x(A),x(K),x(H),x(J))}}static{this.\u0275cmp=C({type:t,selectors:[["app-event-detail"]],decls:12,vars:5,consts:[[1,"mx-auto","max-w-4xl"],[1,"mb-6","flex","items-center","justify-between"],["routerLink","/events",1,"flex","items-center","text-sm","font-medium","text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-gray-200"],[1,"mr-1"],[1,"flex","space-x-3"],["class","rounded-md bg-gray-100 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",3,"routerLink",4,"ngIf"],["class","rounded-md bg-red-100 px-3 py-2 text-sm font-medium text-red-700 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-200 dark:hover:bg-red-900/30",3,"click",4,"ngIf"],["class","flex justify-center py-12",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","rounded-lg bg-white p-8 text-center shadow-elevation-1 dark:bg-gray-800",4,"ngIf"],[1,"rounded-md","bg-gray-100","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-200","dark:bg-gray-700","dark:text-gray-200","dark:hover:bg-gray-600",3,"routerLink"],[1,"rounded-md","bg-red-100","px-3","py-2","text-sm","font-medium","text-red-700","hover:bg-red-200","dark:bg-red-900/20","dark:text-red-200","dark:hover:bg-red-900/30",3,"click"],[1,"flex","justify-center","py-12"],[1,"h-8","w-8","animate-spin","rounded-full","border-4","border-primary-500","border-t-transparent"],[3,"ngClass"],[1,"mb-6","rounded-lg","bg-white","p-6","shadow-elevation-1","dark:bg-gray-800"],[1,"mb-4","flex","items-center","justify-between"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-2","flex","items-center","text-sm","text-gray-500","dark:text-gray-400"],[1,"mx-2"],[1,"prose","prose-lg","max-w-none","dark:prose-invert"],[1,"whitespace-pre-wrap","text-gray-700","dark:text-gray-300"],["class","mt-6",4,"ngIf"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-1","rounded-md","px-3","py-1","text-sm","text-gray-700","hover:bg-gray-100","dark:text-gray-300","dark:hover:bg-gray-700",3,"click"],[1,"rounded-md","px-3","py-1","text-sm","text-gray-700","hover:bg-gray-100","dark:text-gray-300","dark:hover:bg-gray-700"],["id","comments",1,"rounded-lg","bg-white","p-6","shadow-elevation-1","dark:bg-gray-800"],[1,"mb-4","text-xl","font-semibold","text-gray-900","dark:text-white"],["class","mb-6",4,"ngIf"],[1,"space-y-4"],["class","flex space-x-3",4,"ngFor","ngForOf"],["class","py-4 text-center",4,"ngIf"],[1,"mt-6"],[1,"mb-3","text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-2","gap-4","md:grid-cols-3"],["class","overflow-hidden rounded-lg",4,"ngFor","ngForOf"],[1,"overflow-hidden","rounded-lg"],["alt","Attachment",1,"h-48","w-full","object-cover","transition","duration-300","hover:scale-105",3,"src"],[1,"mb-6"],[1,"avatar"],["alt","Your profile image","class","h-full w-full object-cover",3,"src",4,"ngIf"],[4,"ngIf"],[1,"flex-1"],[3,"ngSubmit"],["name","comment","rows","3","placeholder","Write a comment...",1,"textarea",3,"ngModelChange","ngModel"],[1,"mt-2","flex","justify-end"],["type","submit",1,"rounded-md","bg-primary-600","px-3","py-1.5","text-sm","font-medium","text-white","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","disabled:opacity-50","dark:bg-primary-700","dark:hover:bg-primary-600",3,"disabled"],["alt","Your profile image",1,"h-full","w-full","object-cover",3,"src"],[1,"flex-1","rounded-lg","bg-gray-50","p-4","dark:bg-gray-700"],[1,"mb-1","flex","items-center","justify-between"],[1,"text-sm","font-semibold","text-gray-900","dark:text-white"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"text-sm","text-gray-700","dark:text-gray-300"],[1,"py-4","text-center"],[1,"text-gray-500","dark:text-gray-400"],[1,"rounded-lg","bg-white","p-8","text-center","shadow-elevation-1","dark:bg-gray-800"],[1,"mb-4","text-4xl"],[1,"mb-2","text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"mb-6","text-gray-600","dark:text-gray-400"],["routerLink","/events",1,"inline-block","rounded-md","bg-primary-600","px-4","py-2","text-white","hover:bg-primary-700","dark:bg-primary-700","dark:hover:bg-primary-600"]],template:function(d,a){d&1&&(n(0,"div",0)(1,"div",1)(2,"a",2)(3,"span",3),o(4,"\u2190"),i(),o(5," Back to Events "),i(),n(6,"div",4),v(7,$,2,3,"a",5)(8,ee,2,0,"button",6),i()(),v(9,te,2,0,"div",7)(10,le,41,21,"div",8)(11,se,9,0,"div",9),i()),d&2&&(r(7),m("ngIf",a.currentUser&&(a.event==null?null:a.event.userId)===a.currentUser.id),r(),m("ngIf",a.currentUser&&(a.event==null?null:a.event.userId)===a.currentUser.id),r(),m("ngIf",a.isLoading),r(),m("ngIf",!a.isLoading&&a.event),r(),m("ngIf",!a.isLoading&&!a.event))},dependencies:[N,U,V,L,F,O,B,q,G,R,W,z,Y,P],encapsulation:2})}}return t})();export{be as EventDetailComponent};
