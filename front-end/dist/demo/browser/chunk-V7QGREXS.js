import{a as s,b as r,h as a,j as i,t as o,z as c}from"./chunk-Y4TBAV6C.js";var l=(()=>{class n{constructor(){this.notifications=[],this.notificationsSubject=new a([]),this.notifications$=this.notificationsSubject.asObservable(),this.unreadCount=new a(0),this.unreadCount$=this.unreadCount.asObservable(),this.initMockNotifications()}initMockNotifications(){this.notifications=[{id:"1",userId:"1",type:"comment",message:'Jane Smith commented on your event "Landed My Dream Job!"',relatedId:"1",createdAt:new Date(2023,3,15,14,35),read:!1},{id:"2",userId:"1",type:"like",message:'Alex Johnson liked your event "Lost a Friend Today"',relatedId:"2",createdAt:new Date(2023,3,10,9,20),read:!0},{id:"3",userId:"1",type:"system",message:"Welcome to The End Page! Start sharing your life events.",relatedId:null,createdAt:new Date(2023,3,1,12,0),read:!0}],this.notificationsSubject.next([...this.notifications]),this.updateUnreadCount()}getNotifications(){return i(this.notifications).pipe(o(500))}getUnreadCount(){return this.unreadCount.asObservable()}markAsRead(e){let t=this.notifications.find(d=>d.id===e);return t?(t.read=!0,this.notificationsSubject.next([...this.notifications]),this.updateUnreadCount(),i(!0).pipe(o(300))):i(!1)}markAllAsRead(){return this.notifications.forEach(e=>{e.read=!0}),this.notificationsSubject.next([...this.notifications]),this.updateUnreadCount(),i(!0).pipe(o(500))}addNotification(e){let t=r(s({},e),{id:Date.now().toString(),createdAt:new Date});return this.notifications.unshift(t),this.notificationsSubject.next([...this.notifications]),this.updateUnreadCount(),i(t).pipe(o(300))}updateUnreadCount(){let e=this.notifications.filter(t=>!t.read).length;this.unreadCount.next(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{l as a};
