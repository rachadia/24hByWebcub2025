import{a as T}from"./chunk-W4QO3JJA.js";import{$ as i,Ba as C,Ca as w,Da as N,E as f,Ea as E,F as p,Fa as I,N as o,Oa as S,P as b,Q as _,Ra as D,V as m,Y as a,_ as r,ba as g,ca as u,da as l,fa as s,ha as y,oa as x,qa as k,sa as h,ua as v}from"./chunk-7B2THDHR.js";var F=t=>({"bg-primary-50 dark:bg-primary-900/10":t}),R=(t,c,e)=>({"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-300":t,"bg-joy-100 text-joy-800 dark:bg-joy-900 dark:text-joy-300":c,"bg-secondary-100 text-secondary-800 dark:bg-secondary-900 dark:text-secondary-300":e}),j=t=>["/events",t];function L(t,c){if(t&1){let e=g();r(0,"button",8),u("click",function(){f(e);let d=l();return p(d.markAllAsRead())}),s(1," Mark all as read "),i()}}function V(t,c){t&1&&(r(0,"span"),s(1,"\u{1F4E2}"),i())}function M(t,c){t&1&&(r(0,"span"),s(1,"\u2764\uFE0F"),i())}function U(t,c){t&1&&(r(0,"span"),s(1,"\u{1F4AC}"),i())}function O(t,c){t&1&&(r(0,"span"),s(1,"\u{1F465}"),i())}function $(t,c){if(t&1&&(r(0,"a",19),s(1," View "),i()),t&2){let e=l().$implicit;a("routerLink",x(1,j,e.relatedId))}}function B(t,c){if(t&1){let e=g();r(0,"button",20),u("click",function(){f(e);let d=l().$implicit,A=l();return p(A.markAsRead(d.id))}),s(1," Mark read "),i()}}function P(t,c){if(t&1&&(r(0,"li",9)(1,"div",10)(2,"div",11)(3,"span",12),m(4,V,2,0,"span",13)(5,M,2,0,"span",13)(6,U,2,0,"span",13)(7,O,2,0,"span",13),i()(),r(8,"div",14)(9,"p",15),s(10),i(),r(11,"p",16),s(12),h(13,"date"),i()(),r(14,"div"),m(15,$,2,3,"a",17)(16,B,2,0,"button",18),i()()()),t&2){let e=c.$implicit;a("ngClass",x(13,F,!e.read)),o(3),a("ngClass",k(15,R,e.type==="system",e.type==="like",e.type==="comment")),o(),a("ngIf",e.type==="system"),o(),a("ngIf",e.type==="like"),o(),a("ngIf",e.type==="comment"),o(),a("ngIf",e.type==="follow"),o(3),y(" ",e.message," "),o(2),y(" ",v(13,10,e.createdAt,"medium")," "),o(3),a("ngIf",e.relatedId),o(),a("ngIf",!e.read)}}function q(t,c){t&1&&(r(0,"li",21)(1,"p",22),s(2,"No notifications yet."),i()())}var W=(()=>{class t{constructor(e){this.notificationService=e,this.notifications=[],this.hasUnread=!1,this.isLoading=!0}ngOnInit(){this.loadNotifications()}loadNotifications(){this.notificationService.getNotifications().subscribe({next:e=>{this.notifications=e,this.hasUnread=e.some(n=>!n.read),this.isLoading=!1},error:e=>{console.error("Error loading notifications:",e),this.isLoading=!1}})}markAsRead(e){this.notificationService.markAsRead(e).subscribe({next:()=>{let n=this.notifications.find(d=>d.id===e);n&&(n.read=!0),this.hasUnread=this.notifications.some(d=>!d.read)},error:n=>{console.error("Error marking notification as read:",n)}})}markAllAsRead(){this.notificationService.markAllAsRead().subscribe({next:()=>{this.notifications.forEach(e=>{e.read=!0}),this.hasUnread=!1},error:e=>{console.error("Error marking all notifications as read:",e)}})}static{this.\u0275fac=function(n){return new(n||t)(b(T))}}static{this.\u0275cmp=_({type:t,selectors:[["app-notifications"]],decls:9,vars:3,consts:[[1,"mx-auto","max-w-7xl"],[1,"mb-8","flex","items-center","justify-between"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],["class","inline-flex items-center rounded-md border border-transparent bg-primary-100 px-4 py-2 text-sm font-medium text-primary-800 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:bg-primary-900/20 dark:text-primary-300 dark:hover:bg-primary-900/30",3,"click",4,"ngIf"],[1,"overflow-hidden","rounded-lg","bg-white","shadow-elevation-1","dark:bg-gray-800"],["role","list",1,"divide-y","divide-gray-200","dark:divide-gray-700"],["class","relative p-4 hover:bg-gray-50 dark:hover:bg-gray-700",3,"ngClass",4,"ngFor","ngForOf"],["class","p-4 text-center",4,"ngIf"],[1,"inline-flex","items-center","rounded-md","border","border-transparent","bg-primary-100","px-4","py-2","text-sm","font-medium","text-primary-800","hover:bg-primary-200","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:bg-primary-900/20","dark:text-primary-300","dark:hover:bg-primary-900/30",3,"click"],[1,"relative","p-4","hover:bg-gray-50","dark:hover:bg-gray-700",3,"ngClass"],[1,"flex","items-center","space-x-4"],[1,"flex-shrink-0"],[1,"inline-flex","h-8","w-8","items-center","justify-center","rounded-full",3,"ngClass"],[4,"ngIf"],[1,"min-w-0","flex-1"],[1,"truncate","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"truncate","text-sm","text-gray-500","dark:text-gray-400"],["class","inline-flex items-center rounded-md border border-gray-300 bg-white px-2.5 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",3,"routerLink",4,"ngIf"],["class","ml-2 inline-flex items-center rounded-md border border-gray-300 bg-white px-2.5 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",3,"click",4,"ngIf"],[1,"inline-flex","items-center","rounded-md","border","border-gray-300","bg-white","px-2.5","py-1.5","text-xs","font-medium","text-gray-700","shadow-sm","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:border-gray-600","dark:bg-gray-700","dark:text-gray-200","dark:hover:bg-gray-600",3,"routerLink"],[1,"ml-2","inline-flex","items-center","rounded-md","border","border-gray-300","bg-white","px-2.5","py-1.5","text-xs","font-medium","text-gray-700","shadow-sm","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:border-gray-600","dark:bg-gray-700","dark:text-gray-200","dark:hover:bg-gray-600",3,"click"],[1,"p-4","text-center"],[1,"text-gray-500","dark:text-gray-400"]],template:function(n,d){n&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"Notifications"),i(),m(4,L,2,0,"button",3),i(),r(5,"div",4)(6,"ul",5),m(7,P,17,19,"li",6)(8,q,3,0,"li",7),i()()()),n&2&&(o(4),a("ngIf",d.hasUnread),o(3),a("ngForOf",d.notifications),o(),a("ngIf",d.notifications.length===0))},dependencies:[I,C,w,N,E,D,S],encapsulation:2})}}return t})();export{W as NotificationsComponent};
