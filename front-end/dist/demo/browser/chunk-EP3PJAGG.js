import{a as f}from"./chunk-WPHHPEL3.js";import{C as u,Oa as h,Pa as m,h as p,j as i,l as n,m as d,q as c,t as l,z as o}from"./chunk-Y4TBAV6C.js";var g=(()=>{class r{constructor(){this.joyKeywords=["happy","joy","excited","thrilled","ecstatic","delighted","pleased","glad","content","satisfied","cheerful","jubilant","wonderful","amazing","love","celebrate","success","achievement","proud","perfect","won","win"],this.sadnessKeywords=["sad","unhappy","depressed","down","miserable","heartbroken","grief","lost","disappointed","sorry","regret","miss","lonely","alone","tears","crying","upset","hurt","pain","sorrow","gloomy","hopeless"],this.angerKeywords=["angry","mad","furious","outraged","annoyed","irritated","frustrated","hate","rage","disgusted","fed up","offended","enraged","hostile","bitter","resentful","upset","dislike","pissed","infuriated","irate"],this.fearKeywords=["afraid","scared","frightened","terrified","fearful","anxious","nervous","worried","concerned","stress","stressed","panic","dread","horror","alarmed","apprehensive","unsure","uncertain","helpless","threatened"]}detectEmotion(e){let t=e.toLowerCase();return t.includes("happy")||t.includes("joy")||t.includes("excited")||t.includes("positif")?"joy":t.includes("sad")||t.includes("depressed")||t.includes("unhappy")||t.includes("negative")?"sadness":t.includes("angry")||t.includes("furious")||t.includes("mad")||t.includes("colere")||t.includes("col\xE8re")||t.includes("negatif")?"anger":t.includes("scared")||t.includes("afraid")||t.includes("fearful")?"fear":"joy"}getEmotionColor(e){switch(e){case"joy":return"joy-500";case"sadness":return"sadness-500";case"anger":return"anger-500";case"fear":return"fear-500";default:return"primary-500"}}getEmotionDisplayName(e){switch(e){case"joy":return"Joy";case"sadness":return"Sadness";case"anger":return"Anger";case"fear":return"Fear";default:return"Unknown"}}getEmotionIcon(e){switch(e){case"joy":return"\u{1F60A}";case"sadness":return"\u{1F622}";case"anger":return"\u{1F621}";case"fear":return"\u{1F628}";default:return"\u{1F610}"}}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var U=(()=>{class r{constructor(e,t){this.http=e,this.emotionService=t,this.apiUrl=`${f.apiUrl}/events`,this.events=[],this.eventsSubject=new p([]),this.events$=this.eventsSubject.asObservable()}getHeaders(){let e=JSON.parse(localStorage.getItem("currentUser")||"null");return e&&e.token?new h().set("Authorization",`Bearer ${e.token}`):new h}initMockEvents(){this.events=[{id:"1",userId:"1",title:"Landed My Dream Job!",content:"After months of interviews, I finally got an offer from my dream company! So excited to start this new chapter!",createdAt:new Date(2023,3,15),emotion:"joy",theme:"theme-joy",attachments:[],comments:[{id:"1",userId:"2",username:"Jane Smith",content:"Congratulations! So happy for you!",createdAt:new Date(2023,3,15,14,30)}],likes:5},{id:"2",userId:"1",title:"Lost a Friend Today",content:"My childhood friend moved to another country today. We've been friends for over 20 years. I know we'll stay in touch, but it won't be the same.",createdAt:new Date(2023,2,28),emotion:"sadness",theme:"theme-sadness",attachments:["https://images.pexels.com/photos/397096/pexels-photo-397096.jpeg"],comments:[],likes:3},{id:"3",userId:"1",title:"Missed Flight Connection",content:"The airline delayed my first flight and I missed my connection. Now I'm stuck at the airport for 7 hours with no compensation!",createdAt:new Date(2023,1,12),emotion:"anger",theme:"theme-anger",attachments:[],comments:[],likes:0}],this.eventsSubject.next([...this.events])}getEvents(){return this.http.get(this.apiUrl,{headers:this.getHeaders()}).pipe(c(e=>(console.error("Error fetching events",e),i([]))))}getEventById(e){return this.http.get(`${this.apiUrl}/${e}`,{headers:this.getHeaders()})}createEvent(e){return this.http.post(this.apiUrl,e,{headers:this.getHeaders()})}updateEvent(e,t){return this.http.put(`${this.apiUrl}/${e}`,t,{headers:this.getHeaders()})}updateLike(e){return this.http.post(`${this.apiUrl}/${e}/likes`,{increment:!0},{headers:this.getHeaders()})}updateComment(e,t){return this.http.post(`${this.apiUrl}/${e}/comments`,t,{headers:this.getHeaders()})}deleteEvent(e){return this.http.delete(`${this.apiUrl}/${e}`,{headers:this.getHeaders()})}addComment(e,t,a,y){let v={id:Date.now().toString(),userId:t,username:a,content:y,createdAt:new Date};return this.getEventById(e).pipe(n(s=>{if(!s)throw new Error("Event not found");return s.comments.push(v),this.updateComment(e,s).pipe(n(w=>(this.eventsSubject.next([...this.events]),w)))}),d(s=>s))}toggleLike(e){return this.getEventById(e).pipe(n(t=>{if(!t)throw new Error("Event not found");return t.likes+=1,this.updateLike(e).pipe(n(a=>(this.eventsSubject.next([...this.events]),a)))}),d(t=>t))}getEventsByEmotion(e){return i(this.events.filter(t=>t.emotion===e)).pipe(l(500))}getEventsByUserId(e){return this.http.get(`${this.apiUrl}/user/${e}`,{headers:this.getHeaders()})}getTopEvents(){return this.http.get(`${this.apiUrl}/podium`).pipe(c(e=>(console.error("Error fetching top events",e),i([]))))}static{this.\u0275fac=function(t){return new(t||r)(u(m),u(g))}}static{this.\u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{g as a,U as b};
