import{a as m}from"./chunk-WPHHPEL3.js";import{B as d,Ia as c,Ja as p,h as u,j as h,l as n,m as o,s as l,y as i}from"./chunk-7B2THDHR.js";var f=(()=>{class r{constructor(){this.joyKeywords=["happy","joy","excited","thrilled","ecstatic","delighted","pleased","glad","content","satisfied","cheerful","jubilant","wonderful","amazing","love","celebrate","success","achievement","proud","perfect","won","win"],this.sadnessKeywords=["sad","unhappy","depressed","down","miserable","heartbroken","grief","lost","disappointed","sorry","regret","miss","lonely","alone","tears","crying","upset","hurt","pain","sorrow","gloomy","hopeless"],this.angerKeywords=["angry","mad","furious","outraged","annoyed","irritated","frustrated","hate","rage","disgusted","fed up","offended","enraged","hostile","bitter","resentful","upset","dislike","pissed","infuriated","irate"],this.fearKeywords=["afraid","scared","frightened","terrified","fearful","anxious","nervous","worried","concerned","stress","stressed","panic","dread","horror","alarmed","apprehensive","unsure","uncertain","helpless","threatened"]}detectEmotion(t){let e=t.toLowerCase();return e.includes("happy")||e.includes("joy")||e.includes("excited")||e.includes("positif")?"joy":e.includes("sad")||e.includes("depressed")||e.includes("unhappy")||e.includes("negative")?"sadness":e.includes("angry")||e.includes("furious")||e.includes("mad")||e.includes("colere")||e.includes("col\xE8re")||e.includes("negatif")?"anger":e.includes("scared")||e.includes("afraid")||e.includes("fearful")?"fear":"joy"}getEmotionColor(t){switch(t){case"joy":return"joy-500";case"sadness":return"sadness-500";case"anger":return"anger-500";case"fear":return"fear-500";default:return"primary-500"}}getEmotionDisplayName(t){switch(t){case"joy":return"Joy";case"sadness":return"Sadness";case"anger":return"Anger";case"fear":return"Fear";default:return"Unknown"}}getEmotionIcon(t){switch(t){case"joy":return"\u{1F60A}";case"sadness":return"\u{1F622}";case"anger":return"\u{1F621}";case"fear":return"\u{1F628}";default:return"\u{1F610}"}}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var U=(()=>{class r{constructor(t,e){this.http=t,this.emotionService=e,this.apiUrl=`${m.apiUrl}/events`,this.events=[],this.eventsSubject=new u([]),this.events$=this.eventsSubject.asObservable()}getHeaders(){let t=JSON.parse(localStorage.getItem("currentUser")||"null");return t&&t.token?new c().set("Authorization",`Bearer ${t.token}`):new c}initMockEvents(){this.events=[{id:"1",userId:"1",title:"Landed My Dream Job!",content:"After months of interviews, I finally got an offer from my dream company! So excited to start this new chapter!",createdAt:new Date(2023,3,15),emotion:"joy",theme:"theme-joy",attachments:[],comments:[{id:"1",userId:"2",username:"Jane Smith",content:"Congratulations! So happy for you!",createdAt:new Date(2023,3,15,14,30)}],likes:5},{id:"2",userId:"1",title:"Lost a Friend Today",content:"My childhood friend moved to another country today. We've been friends for over 20 years. I know we'll stay in touch, but it won't be the same.",createdAt:new Date(2023,2,28),emotion:"sadness",theme:"theme-sadness",attachments:["https://images.pexels.com/photos/397096/pexels-photo-397096.jpeg"],comments:[],likes:3},{id:"3",userId:"1",title:"Missed Flight Connection",content:"The airline delayed my first flight and I missed my connection. Now I'm stuck at the airport for 7 hours with no compensation!",createdAt:new Date(2023,1,12),emotion:"anger",theme:"theme-anger",attachments:[],comments:[],likes:0}],this.eventsSubject.next([...this.events])}getEvents(){return this.http.get(this.apiUrl,{headers:this.getHeaders()})}getEventById(t){return this.http.get(`${this.apiUrl}/${t}`,{headers:this.getHeaders()})}createEvent(t){return this.http.post(this.apiUrl,t,{headers:this.getHeaders()})}updateEvent(t,e){return this.http.put(`${this.apiUrl}/${t}`,e,{headers:this.getHeaders()})}updateComment(t,e){return this.http.post(`${this.apiUrl}/${t}/comments`,e,{headers:this.getHeaders()})}deleteEvent(t){return this.http.delete(`${this.apiUrl}/${t}`,{headers:this.getHeaders()})}addComment(t,e,a,g){let y={id:Date.now().toString(),userId:e,username:a,content:g,createdAt:new Date};return this.getEventById(t).pipe(n(s=>{if(!s)throw new Error("Event not found");return s.comments.push(y),this.updateComment(t,s).pipe(n(w=>(this.eventsSubject.next([...this.events]),w)))}),o(s=>s))}toggleLike(t){return this.getEventById(t).pipe(n(e=>{if(!e)throw new Error("Event not found");return e.likes+=1,this.updateEvent(t,e).pipe(n(a=>(this.eventsSubject.next([...this.events]),a)))}),o(e=>e))}getEventsByEmotion(t){return h(this.events.filter(e=>e.emotion===t)).pipe(l(500))}getEventsByUserId(t){return this.http.get(`${this.apiUrl}/user/${t}`,{headers:this.getHeaders()})}static{this.\u0275fac=function(e){return new(e||r)(d(p),d(f))}}static{this.\u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{f as a,U as b};
