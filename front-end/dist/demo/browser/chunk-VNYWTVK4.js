import{a as A}from"./chunk-5RRDVB6N.js";import{b as q,c as y,d as N,e as j,h as B,i as R,j as U,n as V,o as z,p as G,q as P}from"./chunk-6QK7JL3M.js";import"./chunk-WPHHPEL3.js";import{Ga as C,H as h,I as b,Ia as F,La as L,O as l,Q as v,R as w,Ra as E,Ta as I,Ua as M,W as u,Xa as T,Z as m,aa as r,ba as i,ca as f,ha as S,ia as x,ka as a,la as k,ta as _}from"./chunk-Y4TBAV6C.js";var D=t=>({"border-red-500 dark:border-red-400":t});function H(t,s){t&1&&(r(0,"div"),a(1,"Email is required"),i())}function O(t,s){t&1&&(r(0,"div"),a(1,"Must be a valid email address"),i())}function J(t,s){if(t&1&&(r(0,"div",21),u(1,H,2,0,"div",22)(2,O,2,0,"div",22),i()),t&2){let o,n,e=x();l(),m("ngIf",(o=e.loginForm.get("email"))==null||o.errors==null?null:o.errors.required),l(),m("ngIf",(n=e.loginForm.get("email"))==null||n.errors==null?null:n.errors.email)}}function K(t,s){t&1&&(r(0,"div"),a(1,"Password is required"),i())}function Q(t,s){t&1&&(r(0,"div"),a(1," Password must be at least 6 characters "),i())}function W(t,s){if(t&1&&(r(0,"div",21),u(1,K,2,0,"div",22)(2,Q,2,0,"div",22),i()),t&2){let o,n,e=x();l(),m("ngIf",(o=e.loginForm.get("password"))==null||o.errors==null?null:o.errors.required),l(),m("ngIf",(n=e.loginForm.get("password"))==null||n.errors==null?null:n.errors.minlength)}}function X(t,s){t&1&&(r(0,"span",23),h(),r(1,"svg",24),f(2,"circle",25)(3,"path",26),i()())}function Y(t,s){if(t&1&&(r(0,"div",27)(1,"div",28)(2,"div",29),h(),r(3,"svg",30),f(4,"path",31),i()(),b(),r(5,"div",32)(6,"h3",33),a(7),i()()()()),t&2){let o=x();l(7),k(o.errorMessage)}}var le=(()=>{class t{constructor(o,n,e,d){this.formBuilder=o,this.authService=n,this.router=e,this.route=d,this.isLoading=!1,this.errorMessage="",this.returnUrl="/",this.loginForm=this.formBuilder.group({email:["",[y.required,y.email]],password:["",[y.required,y.minLength(6)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{email:o,password:n}=this.loginForm.value;this.router.navigateByUrl(this.returnUrl),this.authService.login(o,n).subscribe({next:()=>{this.router.navigateByUrl(this.returnUrl)},error:e=>{this.errorMessage=e.message||"An error occurred during login. Please try again.",this.isLoading=!1},complete:()=>{this.isLoading=!1}})}static{this.\u0275fac=function(n){return new(n||t)(v(z),v(A),v(I),v(E))}}static{this.\u0275cmp=w({type:t,selectors:[["app-login"]],decls:34,vars:12,consts:[[1,"flex","min-h-[80vh]","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"w-full","max-w-md","space-y-8"],[1,"mt-6","text-center","text-3xl","font-bold","tracking-tight","text-gray-900","dark:text-white"],[1,"mt-2","text-center","text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/auth/register",1,"font-medium","text-primary-600","hover:text-primary-500","dark:text-primary-400"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],[1,"-space-y-px","rounded-md","shadow-sm"],["for","email-address",1,"sr-only"],["id","email-address","name","email","type","email","formControlName","email","autocomplete","email","required","","placeholder","Email address",1,"input","relative","block","w-full","rounded-t-md","border-gray-300","px-3","py-2","text-gray-900","placeholder-gray-500","focus:z-10","focus:border-primary-500","focus:outline-none","focus:ring-primary-500","dark:border-gray-600","dark:bg-gray-700","dark:text-white","dark:placeholder-gray-400","sm:text-sm",3,"ngClass"],["class","mt-1 text-sm text-red-600 dark:text-red-400",4,"ngIf"],["for","password",1,"sr-only"],["id","password","name","password","type","password","formControlName","password","autocomplete","current-password","required","","placeholder","Password",1,"input","relative","block","w-full","rounded-b-md","border-gray-300","px-3","py-2","text-gray-900","placeholder-gray-500","focus:z-10","focus:border-primary-500","focus:outline-none","focus:ring-primary-500","dark:border-gray-600","dark:bg-gray-700","dark:text-white","dark:placeholder-gray-400","sm:text-sm",3,"ngClass"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["id","remember-me","name","remember-me","type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-primary-600","focus:ring-primary-500","dark:border-gray-600","dark:bg-gray-700"],["for","remember-me",1,"ml-2","block","text-sm","text-gray-900","dark:text-gray-300"],[1,"text-sm"],["href","#",1,"font-medium","text-primary-600","hover:text-primary-500","dark:text-primary-400"],["type","submit",1,"group","relative","flex","w-full","justify-center","rounded-md","border","border-transparent","bg-primary-600","py-2","px-4","text-sm","font-medium","text-white","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","disabled:opacity-70","dark:bg-primary-700","dark:hover:bg-primary-600",3,"disabled"],["class","absolute inset-y-0 left-0 flex items-center pl-3",4,"ngIf"],["class","rounded-md bg-red-50 p-4 dark:bg-red-900/20",4,"ngIf"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],[4,"ngIf"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"h-5","w-5","animate-spin","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"rounded-md","bg-red-50","p-4","dark:bg-red-900/20"],[1,"flex"],[1,"flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-200"]],template:function(n,e){if(n&1&&(r(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),a(4," Sign in to your account "),i(),r(5,"p",3),a(6," Or "),r(7,"a",4),a(8," create a new account "),i()()(),r(9,"form",5),S("ngSubmit",function(){return e.onSubmit()}),r(10,"div",6)(11,"div")(12,"label",7),a(13,"Email address"),i(),f(14,"input",8),u(15,J,3,2,"div",9),i(),r(16,"div")(17,"label",10),a(18,"Password"),i(),f(19,"input",11),u(20,W,3,2,"div",9),i()(),r(21,"div",12)(22,"div",13),f(23,"input",14),r(24,"label",15),a(25," Remember me "),i()(),r(26,"div",16)(27,"a",17),a(28," Forgot your password? "),i()()(),r(29,"div")(30,"button",18),u(31,X,4,0,"span",19),a(32," Sign in "),i()(),u(33,Y,8,1,"div",20),i()()()),n&2){let d,p,g,c;l(9),m("formGroup",e.loginForm),l(5),m("ngClass",_(8,D,((d=e.loginForm.get("email"))==null?null:d.invalid)&&(((d=e.loginForm.get("email"))==null?null:d.dirty)||((d=e.loginForm.get("email"))==null?null:d.touched)))),l(),m("ngIf",((p=e.loginForm.get("email"))==null?null:p.invalid)&&(((p=e.loginForm.get("email"))==null?null:p.dirty)||((p=e.loginForm.get("email"))==null?null:p.touched))),l(4),m("ngClass",_(10,D,((g=e.loginForm.get("password"))==null?null:g.invalid)&&(((g=e.loginForm.get("password"))==null?null:g.dirty)||((g=e.loginForm.get("password"))==null?null:g.touched)))),l(),m("ngIf",((c=e.loginForm.get("password"))==null?null:c.invalid)&&(((c=e.loginForm.get("password"))==null?null:c.dirty)||((c=e.loginForm.get("password"))==null?null:c.touched))),l(10),m("disabled",e.loginForm.invalid||e.isLoading),l(),m("ngIf",e.isLoading),l(2),m("ngIf",e.errorMessage)}},dependencies:[L,C,F,T,M,G,B,q,N,j,V,P,R,U],encapsulation:2})}}return t})();export{le as LoginComponent};
