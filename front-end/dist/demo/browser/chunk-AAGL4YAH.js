import{b as D,c as y,d as G,e as j,h as B,i as L,j as V,l as q,m as A,n as z}from"./chunk-YHPL2QDS.js";import{a as R,b as H}from"./chunk-E24AH63J.js";import{B as l,Ba as T,D as f,E as C,I as u,L as m,N as t,O as e,P as g,R as S,S as x,U as o,V as w,W as b,ba as E,na as k,pa as F,ra as I,u as h,v as _,xa as N,ya as M}from"./chunk-K65JTHMW.js";var P=i=>({"border-red-500 dark:border-red-400":i});function Y(i,p){i&1&&(t(0,"div"),o(1,"Title is required"),e())}function J(i,p){if(i&1&&(t(0,"div",28),u(1,Y,2,0,"div",29),e()),i&2){let r,a=x();l(),m("ngIf",(r=a.eventForm.get("title"))==null||r.errors==null?null:r.errors.required)}}function X(i,p){i&1&&(t(0,"div"),o(1,"Content is required"),e())}function K(i,p){i&1&&(t(0,"div"),o(1," Content must be at least 10 characters "),e())}function O(i,p){if(i&1&&(t(0,"div",28),u(1,X,2,0,"div",29)(2,K,2,0,"div",29),e()),i&2){let r,a,n=x();l(),m("ngIf",(r=n.eventForm.get("content"))==null||r.errors==null?null:r.errors.required),l(),m("ngIf",(a=n.eventForm.get("content"))==null||a.errors==null?null:a.errors.minlength)}}function Q(i,p){if(i&1&&(t(0,"div",6)(1,"div",30)(2,"div",31)(3,"div",32)(4,"span",33),o(5),e()(),t(6,"div",34)(7,"h3",35),o(8),e(),t(9,"div",36)(10,"p"),o(11),e()()()()()()),i&2){let r=x();l(5),w(r.emotionIcon),l(3),b(" Detected Mood: ",r.emotionDisplayName," "),l(3),b(" Based on your text, we've detected a ",r.emotionDisplayName.toLowerCase()," mood. Your event will be styled with a matching theme. ")}}function U(i,p){i&1&&(t(0,"span",37),h(),t(1,"svg",38),g(2,"circle",39)(3,"path",40),e()())}var le=(()=>{class i{constructor(r,a,n,s){this.formBuilder=r,this.eventService=a,this.emotionService=n,this.router=s,this.isSubmitting=!1,this.detectedEmotion="",this.emotionDisplayName="",this.emotionIcon="",this.eventForm=this.formBuilder.group({title:["",y.required],content:["",[y.required,y.minLength(10)]],attachments:[[]]}),this.eventForm.get("content")?.valueChanges.subscribe(d=>{d&&d.length>20?(this.detectedEmotion=this.emotionService.detectEmotion(d),this.emotionDisplayName=this.emotionService.getEmotionDisplayName(this.detectedEmotion),this.emotionIcon=this.emotionService.getEmotionIcon(this.detectedEmotion)):this.detectedEmotion=""})}onSubmit(){this.eventForm.invalid||(this.isSubmitting=!0,this.eventService.createEvent(this.eventForm.value).subscribe({next:r=>{this.router.navigate(["/events",r.id])},error:r=>{console.error("Error creating event:",r),this.isSubmitting=!1}}))}static{this.\u0275fac=function(a){return new(a||i)(f(q),f(H),f(R),f(N))}}static{this.\u0275cmp=C({type:i,selectors:[["app-event-create"]],decls:42,vars:12,consts:[[1,"mx-auto","max-w-4xl"],[1,"mb-8","flex","items-center","justify-between"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],["routerLink","/events",1,"rounded-md","bg-gray-100","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-200","dark:bg-gray-700","dark:text-gray-200","dark:hover:bg-gray-600"],[1,"rounded-lg","bg-white","p-6","shadow-elevation-1","dark:bg-gray-800"],[3,"ngSubmit","formGroup"],[1,"mb-6"],["for","title",1,"label"],["type","text","id","title","formControlName","title","placeholder","Give your event a title",1,"input",3,"ngClass"],["class","mt-1 text-sm text-red-600 dark:text-red-400",4,"ngIf"],["for","content",1,"label"],["id","content","formControlName","content","rows","6","placeholder","Describe what happened and how you feel about it...",1,"textarea",3,"ngClass"],[1,"label"],[1,"flex","items-center","justify-center","w-full"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-32","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100","dark:border-gray-600","dark:bg-gray-700","dark:hover:bg-gray-600"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],["aria-hidden","true","fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-10","h-10","mb-3","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"mb-2","text-sm","text-gray-500","dark:text-gray-400"],[1,"font-semibold"],[1,"text-xs","text-gray-500","dark:text-gray-400"],["id","dropzone-file","type","file",1,"hidden"],[1,"mt-2","text-sm","text-gray-500","dark:text-gray-400"],["class","mb-6",4,"ngIf"],[1,"flex","justify-end"],["type","button","routerLink","/events",1,"mr-3","rounded-md","bg-white","px-4","py-2","text-sm","font-medium","text-gray-700","shadow-sm","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:bg-gray-700","dark:text-gray-200","dark:hover:bg-gray-600"],["type","submit",1,"inline-flex","items-center","rounded-md","border","border-transparent","bg-primary-600","px-4","py-2","text-sm","font-medium","text-white","shadow-sm","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","disabled:opacity-70","dark:bg-primary-700","dark:hover:bg-primary-600",3,"disabled"],["class","mr-2",4,"ngIf"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],[4,"ngIf"],[1,"rounded-md","bg-gray-50","p-4","dark:bg-gray-700"],[1,"flex"],[1,"flex-shrink-0"],[1,"text-2xl"],[1,"ml-3"],[1,"text-sm","font-medium","text-gray-800","dark:text-gray-200"],[1,"mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"mr-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"h-4","w-4","animate-spin","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(a,n){if(a&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Create New Event"),e(),t(4,"a",3),o(5," Back to Events "),e()(),t(6,"div",4)(7,"form",5),S("ngSubmit",function(){return n.onSubmit()}),t(8,"div",6)(9,"label",7),o(10,"Title"),e(),g(11,"input",8),u(12,J,2,1,"div",9),e(),t(13,"div",6)(14,"label",10),o(15,"Your Event"),e(),g(16,"textarea",11),u(17,O,3,2,"div",9),e(),t(18,"div",6)(19,"label",12),o(20,"Attachments"),e(),t(21,"div",13)(22,"label",14)(23,"div",15),h(),t(24,"svg",16),g(25,"path",17),e(),_(),t(26,"p",18)(27,"span",19),o(28,"Click to upload"),e(),o(29," or drag and drop "),e(),t(30,"p",20),o(31," SVG, PNG, JPG or GIF (MAX. 2MB) "),e()(),g(32,"input",21),e()(),t(33,"p",22),o(34," (File uploads will be available in a future update) "),e()(),u(35,Q,12,3,"div",23),t(36,"div",24)(37,"button",25),o(38," Cancel "),e(),t(39,"button",26),u(40,U,4,0,"span",27),o(41," Create Event "),e()()()()()),a&2){let s,d,v,c;l(7),m("formGroup",n.eventForm),l(4),m("ngClass",E(8,P,((s=n.eventForm.get("title"))==null?null:s.invalid)&&(((s=n.eventForm.get("title"))==null?null:s.dirty)||((s=n.eventForm.get("title"))==null?null:s.touched)))),l(),m("ngIf",((d=n.eventForm.get("title"))==null?null:d.invalid)&&(((d=n.eventForm.get("title"))==null?null:d.dirty)||((d=n.eventForm.get("title"))==null?null:d.touched))),l(4),m("ngClass",E(10,P,((v=n.eventForm.get("content"))==null?null:v.invalid)&&(((v=n.eventForm.get("content"))==null?null:v.dirty)||((v=n.eventForm.get("content"))==null?null:v.touched)))),l(),m("ngIf",((c=n.eventForm.get("content"))==null?null:c.invalid)&&(((c=n.eventForm.get("content"))==null?null:c.dirty)||((c=n.eventForm.get("content"))==null?null:c.touched))),l(18),m("ngIf",n.detectedEmotion),l(4),m("disabled",n.eventForm.invalid||n.isSubmitting),l(),m("ngIf",n.isSubmitting)}},dependencies:[I,k,F,T,M,A,B,D,G,j,z,L,V],encapsulation:2})}}return i})();export{le as EventCreateComponent};
